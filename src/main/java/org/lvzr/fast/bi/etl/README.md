

###ETL是数据抽取（Extract）、清洗（Cleaning）、转换（Transform）、装载（Load）的过程

###ETL工具
http://blog.itpub.net/7868752/viewspace-1060666/

###ETL 浅谈
http://blog.csdn.net/adparking/article/details/48949905


###ETL的实现有多种方法，常用的有三种。
一种是借助ETL工具(如Oracle的OWB、SQL Server 2000的DTS、SQL Server2005的SSIS服务、Informatic等)实现，
一种是SQL方式实现，另外一种是ETL工具和SQL相结合。前两种方法各有各的优缺点，借助工具可以快速的建立起ETL工程，
	屏蔽了复杂的编码任务，提高了速度，降低了难度，但是缺少灵活性。SQL的方法优点是灵活，提高ETL运行效率，
	但是编码复杂，对技术要求比较高。
第三种是综合了前面二种的优点，会极大地提高ETL的开发速度和效率。


目前，ETL工具的典型代表有：Informatica、Datastage、OWB、微软DTS、Beeload、Kettle……
开源的工具有eclipse的etl插件。cloveretl.

主流ETL产品：
Ascential公司的Datastage（Datastage在2005年被IBM收购）
Informatica公司的Powercenter
NCR Teradata公司的ETL Automation（一套ETL框架、主要关注“抽取”）。

ETL工具有：
OWB(Oracle Warehouse Builder)
ODI(Oracle Data Integrator)
Informatic PowerCenter（Informatica公司）
AICloudETL、
DataStage（Ascential公司）
Repository Explorer
Beeload、Kettle
DataSpider
ETL Automation（NCR Teradata公司）
Data Integrator（Business Objects公司）
DecisionStream（Cognos公司）

###ETL工具的目标
可视化配置
抽取接口高可扩展，清洗规划高可扩展，转换规则高可扩展，目标接口高可扩展，灵活组装与配置
避免底层重复编码，做到ETL过程稳定性

-------------------------------------------------------------------------------------------------------
#架构设计
功能：关联、转换、增量、记录数限制、调度配置、大并发、多线程、过程监控、处理报告、报告通知、成功备份，失败备份，未处理标记
日志：执行日志、错误日志、总体日志、警告发送

可批量可增量
内存存放规则，可视化配置，底层编码高可扩展
元数据管理(mogodb、hbase、solr、redis、memcached、database、file)
元数据的典型表现为对象的描述，即对数据库、表、列、列属性（类型、格式、约束等）以及主键/外部键关联等等的描述
而元数据对于ETL的集中表现为：定义数据源的位置及数据源的属性、确定从源数据到目标数据的对应规则、确定相关的业务逻辑、
在数据实际加载前的其他必要的准备工作，等等，它一般贯穿整个数据仓库项目，而ETL的所有过程必须最大化地参照元数据，这样才能快速实现ETL。
**ETL生命周期化，部件化，流程化，流程阶段可动态配置，部件可自由组装配置，插件化可扩展性，各阶段可底层灵活编码扩展**
ETL各部件层次平等或可嵌套


-----抽取-------------------------------------
抽取E：(可扩展的接口适配器，高度抽象)，(需有格式规则，灵活易用的的源元数据<可永久可临时>)，要分层，可固定，可适配
一次几条记录或游标
txt、xml、json、zip、database、xls、cvs、mq

-----规则处理---------------------------------
转换前清洗C：
空值补缺原则(中值、平均值、默认值)，时间格式，数值格式，数据验证(正则表达式)，去重规则，去除不完整数据，去除错误不合法数据

转换T：
不一致数据归一化
数据粒度的转换
商务规则的计算

转换T：(源元数据映射到目标元数据，可映射到多目标源),由源元数据到目标元数据的映射，实现数据的转换
一行对多行，多行对多行，一行分多片，多行合成一行，字段拆分，字段合并，灵活的字符串截取
总之，设计时要有行映射规则，字段映射规则
特定情况的映射，应该自动实现清洗，减小清洗C配置工作

转换后清洗C：

-----加载-------------------------------------
加载L：(可扩展的接口适配器，高度抽象)、(目标源数据)
mogodb、hbase、solr、redis、memcached、database、filed





----------------------------------------------------------------------------------------------------
###支持完整的数据集成生命周期
数据集成平台必须支持数据集成生命周期中的所有五个关键步骤：访问、发现、 清洗、集成和交付。

第 1 步：访问 大多数机构的数据存储在数千个位置，不只限于企业内部，还存放在防火墙外的业务合作伙伴或 SaaS 供应商的“云”中。无论何种来源或结构，
          所有数据都必须可以接受访问。必须从隐秘的大型主机系统、关系数据库、应用程序、XML、消息甚至从电子数据表之类的文档中提取数据。

第 2 步：发现数据源－ 特别是记录不详尽或来源未知 － 必须探查才能了解其内容和结构。需要推断数据中隐含的模式和规则。必须标记潜在的数据质量问题。

第 3 步：清洗 必须清洗数据以确保其质量、准确性和完整性。必须解决错误或疏漏问题。必须强制执行数据标准，并且对值进行验证。必须删除重复的数据条目。

第 4 步：集成 要跨越多个系统保持一致的数据视图，必须集成并转换数据， 以便协调不同系统在定义各种数据元素并使之结构化的方式上存在的差异。例如，
对于“客户盈利”，营销系统和财务系统可能具有完全不同的业务定义和数据格式，这些差异必须得到解决。

第 5 步：交付 必须以适当的格式、在适当的时间将适当的数据交付给所有需要数据的应用程序和用户。交付数据的范围涵盖从支持实时业务运营的单个数据元素
           或记录到用于趋势分析和企业报告的数百万个记录。必须确保数据的高可用性和交付安全性。





-----------------------------------------------------------------------------------------------------
###ETL体系结构图
Design manager 提供一个图形化的映射环境，让开发者定义从源到目标的映射关系、转换、处理流程。设计过程的各对象的逻辑定义存储在一个元数据资料库中。

Meta data management 提供一个关于ETL设计和运行处理等相关定义、管理信息的元数据资料库。ETL引擎在运行时和其它应用都可参考此资料库中的元数据。

Extract 通过接口提取源数据，例如?ODBC、专用数据库接口和平面文件提取器，并参照元数据来决定数据的提取及其提取方式。

Transform 开发者将提取的数据，按照业务需要转换为目标数据结构，并实现汇总。

Load 加载经转换和汇总的数据到目标数据仓库中，可实现SQL或批量加载。

Transport services 利用网络协议或文件协议，在源和目标系统之间移动数据，利用内存在ETL处理的各组件中移动数据。

Administration and operation 可让管理员基于事件和时间进行调度、运行、监测ETL作业、管理错误信息、从失败中恢复和调节从源系统的输出。




--------------------------------------------------------------------------------------------------------
###具体实现 
####实现ETL，首先要实现ETL转换的过程。它可以集中地体现为以下几个方面：
1、空值处理 可捕获字段空值，进行加载或替换为其他含义数据，并可根据字段空值实现分流加载到不同目标库。

2、规范化数据格式 可实现字段格式约束定义，对于数据源中时间、数值、字符等数据，可自定义加载格式。

3、拆分数据 依据业务需求对字段可进行分解。例，主叫号 861082585313-8148，可进行区域码和电话号码分解。

4、验证数据正确性 可利用Lookup及拆分功能进行数据验证。例如，主叫号861082585313-8148，进行区域码和电话号码分解后，
	可利用Lookup返回主叫网关或交换机记载的主叫地区，进行数据验证。

5、数据替换 对于因业务因素，可实现无效数据、缺失数据的替换。

6、Lookup 查获丢失数据 Lookup实现子查询，并返回用其他手段获取的缺失字段，保证字段完整性。

7、建立ETL过程的主外键约束 对无依赖性的非法数据，可替换或导出到错误数据文件中，保证主键唯一记录的加载。


####为了能更好地实现ETL，笔者建议用户在实施ETL过程中应注意以下几点：
第一，如果条件允许，可利用数据中转区对运营数据进行预处理，保证集成与加载的高效性；

第二，如果ETL的过程是主动“拉取”，而不是从内部“推送”，其可控性将大为增强；

第三，ETL之前应制定流程化的配置管理和标准协议；

第四，关键数据标准至关重要。目前，ETL面临的最大挑战是当接收数据时其各源数据的**异构性和低质量**。以电信为例，A系统按照统计代码管理数据，
B系统按照账目数字管理，C系统按照语音ID管理。当ETL需要对这三个系统进行集成以获得对客户的全面视角时，这一过程需要复杂的匹配规则、
名称/地址正常化与标准化。而ETL在处理过程中会定义一个关键数据标准，并在此基础上，制定相应的数据接口标准。


















